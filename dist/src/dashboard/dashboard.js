import"../../assets/modulepreload-polyfill-B5Qt9EMX.js";import{V as p}from"../../assets/vector_db-ETc79CbY.js";const c=new p;document.addEventListener("DOMContentLoaded",async()=>{await c.init(),u(),E(),b()});async function u(){const n=await c.getAll();document.getElementById("totalScanned").textContent=n.length;const t=n.filter(o=>o.weight!==1).length;document.getElementById("totalInteractions").textContent=t}async function E(){const t=(await c.getAll()).filter(e=>e.weight!==1).sort((e,s)=>s.timestamp-e.timestamp).slice(0,10),o=document.getElementById("logsTable");o.innerHTML="",t.forEach(e=>{const s=document.createElement("tr"),l=new Date(e.timestamp).toLocaleTimeString(),a=(e.weight-1).toFixed(2),d=a>0?"Positive":"Negative";s.innerHTML=`
      <td>${l}</td>
      <td><span class="tag">${d}</span></td>
      <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${e.id}</td>
      <td style="color: ${a>0?"#10b981":"#ef4444"}">${a>0?"+":""}${a}</td>
    `,o.appendChild(s)})}async function b(){const n=document.getElementById("tasteGraph"),t=n.getContext("2d"),o=n.width=n.offsetWidth,e=n.height=n.offsetHeight,s=await c.getAll(),l=await c.get("USER_PROFILE");t.clearRect(0,0,o,e);const a=o/2,d=e/2;t.beginPath(),t.arc(a,d,8,0,Math.PI*2),t.fillStyle="#8b5cf6",t.fill(),t.shadowBlur=10,t.shadowColor="#8b5cf6",s.forEach(i=>{if(i.id==="USER_PROFILE")return;let h=0;l&&i.vector?h=c.cosineSimilarity(i.vector,l.vector):h=Math.random();const f=(1-h)*(Math.min(o,e)/2-20);let r=0;for(let g=0;g<i.id.length;g++)r=i.id.charCodeAt(g)+((r<<5)-r);const m=r%360*(Math.PI/180),w=a+Math.cos(m)*f,y=d+Math.sin(m)*f;t.beginPath(),t.arc(w,y,4,0,Math.PI*2),t.fillStyle=i.weight>1?"#10b981":i.weight<1?"#ef4444":"#94a3b8",t.fill()})}
