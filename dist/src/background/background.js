console.log("TasteOS: Background service worker loaded");const s=new Worker(chrome.runtime.getURL("src/worker/ml_worker.js"),{type:"module"}),t=new Map;s.onmessage=e=>{const{type:n,payload:r,requestId:o}=e.data;if(n==="SCORES_UPDATED"&&t.has(o)){const{sendResponse:a}=t.get(o);a(r),t.delete(o)}};chrome.runtime.onMessage.addListener((e,n,r)=>{if(e.action==="SCORE_ITEMS"){const o=Math.random().toString(36).substr(2,9);return t.set(o,{sendResponse:r}),s.postMessage({type:"SCORE_ITEMS",payload:e.payload,requestId:o}),!0}e.action==="LOG_INTERACTION"&&s.postMessage({type:"LOG_INTERACTION",payload:e.payload})});
